version: 0

name: readme
description: README file best practices
author: support@earthly.dev

default_image: earthly/lunar-lib:base-main
landing_page:
  display_name: "README Guardrails"
  long_description: |
    Validate README files against documentation standards. Ensure repositories have
    proper documentation by checking for file existence, minimum content length,
    and required section headings.
  category: "repository-and-ownership"
  icon: "assets/readme.svg"
  status: "stable"
  requires:
    - slug: "readme"
      type: "collector"
      reason: "Provides README file metadata"
  related: []

policies:
  - name: readme-exists
    description: |
      Verifies that a `README.md` or `README` file exists in the repository root.
      Every repository should have basic documentation for discoverability.
    mainPython: ./readme-exists.py
    keywords: ["readme", "documentation", "repository docs"]

  - name: readme-min-line-count
    description: |
      Requires the README to have a minimum number of lines (default 25).
      Prevents placeholder READMEs that lack useful information.
    mainPython: ./min-line-count.py
    keywords: ["readme length", "documentation quality"]

  - name: readme-required-sections
    description: |
      Ensures the README contains required section headings (e.g., Installation, Usage).
      Configurable via the required_sections input parameter.
    mainPython: ./required-sections.py
    keywords: ["readme sections", "documentation structure"]

inputs:
  min_lines:
    description: Minimum number of lines required in README file
    default: 25
  required_sections:
    description: Comma-separated list of required sections in README file
    default: ""
